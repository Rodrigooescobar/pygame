import pygame
import sys
from player import *
from enemy import *
from constantes import *




class Game:
    def __init__(self) -> None:
       self.pantalla = pygame.display.set_mode(RESOLUCION)
       self.fondo = pygame.image.load("imagenes/fondo.png")
       self.fondo = pygame.transform.scale(
           self.fondo, (ANCHO_VENTANA, ALTO_VENTANA))
       self.rect_fondo = self.fondo.get_rect()
       self.gameover = True
       self.score = 0
       

    def eventos(self):
        lista_eventos = pygame.event.get()
        for evento in lista_eventos:
            if evento.type == pygame.QUIT:
                self.gameover = False
                pygame.quit()
                sys.exit()
            elif evento.type == pygame.KEYDOWN:
                if evento.key == pygame.K_SPACE:
                    self.player.shot_player()
                    self.enemigos.shot_enemy()
    
    def new_game(self):
        self.lista_proyectil_player = []
        self.player = Player(self, 1500, self.lista_proyectil_player)
        self.lista_proyectil_enemy = []
        self.enemigos = Enemy(500, 100, self.lista_proyectil_enemy, 0, 5)
        




    def draw(self):
        self.pantalla.blit(self.fondo, self.rect_fondo)
        self.player.draw_player(self.pantalla)
        self.enemigos.draw_enemy(self.pantalla)
        
        

    def update(self):
        self.player.update_player(5)
        self.enemigos.update_enemy()
        pass



    def actualizar_pantalla(self):
        pass



    def run(self):
        self.clock = pygame.time.Clock()
        self.new_game()
        while self.gameover:
            self.clock.tick(FPS)
            self.eventos()
            self.draw()
            self.update()
            self.actualizar_pantalla()
            pygame.display.flip()

juego = Game()
juego.run()
